<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.13.2">
<title>Economic Insights | Economic Data Dashboard</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight,alt,wide.db1cdf55.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight,alt,wide.db1cdf55.css">
<link rel="modulepreload" href="./_observablehq/client.ddb56a48.js">
<link rel="modulepreload" href="./_observablehq/runtime.e080113b.js">
<link rel="modulepreload" href="./_observablehq/stdlib.727b6db9.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/119796e4.js">
<link rel="modulepreload" href="./_npm/@observablehq/plot@0.6.17/0bcb0628.js">
<link rel="modulepreload" href="./_import/components/dateFilter.21284dea.js">
<link rel="modulepreload" href="./_import/components/gridControls.73dc4792.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/068a0009.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/22b0b812.js">
<link rel="modulepreload" href="./_npm/interval-tree-1d@1.0.4/58bb8423.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/febeadae.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/f9e53d23.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/5b700215.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/dbfdb572.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/c4746b49.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/7f2c0d28.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/cd457405.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/4ea6f3e5.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/af52e89f.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/c08a1bc1.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/b090e61c.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/8c46a257.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/f4ab9146.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/cf5dd672.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/e3741cbe.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/41ec8879.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/25cd1b1d.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/d7b6959c.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/71ca156f.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/0490a22a.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/3acc199f.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/b260a842.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/5c2eae07.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/bc097c44.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/71fb062b.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/0cd5b88a.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/9ead8d20.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/6c4f3310.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/3140a249.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/c49cafc1.js">
<link rel="modulepreload" href="./_npm/binary-search-bounds@2.0.5/dc0f4b66.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/afae70c2.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/4e5574dc.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/771ee8a2.js">

    <meta name="description" content="Explore Federal Reserve Economic Data (FRED)">
    <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%3E%3Ctext%20y='.9em'%20font-size='90'%3E%F0%9F%93%8A%3C/text%3E%3C/svg%3E">
  
<script type="module">

import {define} from "./_observablehq/client.ddb56a48.js";
import {registerFile} from "./_observablehq/stdlib.727b6db9.js";

registerFile("./data/indicators.json", {"name":"./data/indicators.json","mimeType":"application/json","path":"./_file/data/indicators.029f559a.json","lastModified":1750780102015,"size":295323});

define({id: "6447da08", inputs: ["FileAttachment"], outputs: ["html","Plot","INDICATORS","createDateFilter","filterDataByDateRange","getDateRangeFromFilter","createGridControls","getGridClass","getChartDimensions","getGridSettingsFromControls"], body: async (FileAttachment) => {
const [{html}, Plot, {createDateFilter, filterDataByDateRange, getDateRangeFromFilter}, {createGridControls, getGridClass, getChartDimensions, getGridSettingsFromControls}] = await Promise.all([import("./_npm/htl@0.3.1/119796e4.js"), import("./_npm/@observablehq/plot@0.6.17/0bcb0628.js"), import("./_import/components/dateFilter.21284dea.js"), import("./_import/components/gridControls.73dc4792.js")]);

const INDICATORS = FileAttachment("./data/indicators.json").json();

// Import our components

return {html,Plot,INDICATORS,createDateFilter,filterDataByDateRange,getDateRangeFromFilter,createGridControls,getGridClass,getChartDimensions,getGridSettingsFromControls};
}});

define({id: "ea48656a", inputs: ["INDICATORS"], outputs: ["INDICATORS_FLAT"], body: (INDICATORS) => {
// Process the indicators data
const INDICATORS_FLAT = [];

for (const [key, value] of Object.entries(INDICATORS)) {
  if (Array.isArray(value)) {
    value.forEach((data) => {
      INDICATORS_FLAT.push({
        Indicator: data.id,
        Value: Number(data.value),
        Date: new Date(data.date),
        Units: data.units,
        [data.units]: data.value,
        Title: data.title,
        Description: data.description,
        Group: data.group
      });
    });
  }
}

INDICATORS_FLAT.sort((a, b) => a.Date.getTime() - b.Date.getTime());
return {INDICATORS_FLAT};
}});

define({id: "ee209c23", outputs: ["INSIGHT_CATEGORIES","ECONOMIC_INSIGHTS"], body: () => {
// Define insight categories with better organization
const INSIGHT_CATEGORIES = {
  "Economic Health": {
    insights: ["MISERY_INDEX", "REAL_INTEREST_RATE"],
    color: "#e74c3c",
    description: "Key indicators of economic stress and financial conditions affecting everyday Americans",
    icon: "üìä"
  },
  "Housing Market": {
    insights: ["HOUSING_AFFORDABILITY", "HOUSING_DIVERGENCE"],
    color: "#27ae60", 
    description: "Analysis of housing affordability and regional market differences",
    icon: "üè†"
  },
  "Growth Analysis": {
    insights: ["ECONOMIC_GROWTH_INDEX"],
    color: "#3498db",
    description: "Comprehensive measures of economic expansion and prosperity",
    icon: "üìà"
  }
};

// Define improved insight definitions
const ECONOMIC_INSIGHTS = {
  MISERY_INDEX: {
    id: "MISERY_INDEX",
    title: "Economic Misery Index",
    subtitle: "How tough are times for average Americans?",
    description: "Combines unemployment and inflation rates to measure economic hardship. Higher values indicate more difficult economic conditions for families.",
    formula: "Unemployment Rate + Inflation Rate",
    components: ["UNRATE", "CPIAUCSL"],
    units: "Percentage Points",
    category: "Economic Health",
    interpretation: {
      low: "Times are relatively good - jobs are available and prices are stable",
      medium: "Moderate economic stress - some challenges with jobs or rising prices", 
      high: "Economic hardship - difficult job market and/or rapidly rising prices"
    }
  },
  REAL_INTEREST_RATE: {
    id: "REAL_INTEREST_RATE",
    title: "Real Interest Rate",
    subtitle: "Are your savings actually growing?",
    description: "Shows whether interest rates are keeping up with inflation. Positive means your money grows, negative means inflation is eating your savings.",
    formula: "Federal Funds Rate - Inflation Rate",
    components: ["FEDFUNDS", "CPIAUCSL"],
    units: "Percentage Points",
    category: "Economic Health",
    interpretation: {
      positive: "Good for savers - interest rates beat inflation",
      negative: "Tough for savers - inflation is higher than interest rates",
      neutral: "Break-even - interest rates match inflation"
    }
  },
  HOUSING_AFFORDABILITY: {
    id: "HOUSING_AFFORDABILITY",
    title: "Housing Affordability Comparison",
    subtitle: "How affordable is housing across different regions?",
    description: "Compares how much income is needed to afford a typical home. Higher values mean housing is more affordable relative to income.",
    formula: "Median Income / Median Home Price √ó 100",
    components: ["MEHOINUSA672N", "MSPUS", "MEHOINUSALA646N", "MEDLISPRIAL"],
    units: "Affordability Index",
    category: "Housing Market",
    interpretation: {
      high: "Housing is relatively affordable compared to incomes",
      medium: "Moderate housing affordability challenges",
      low: "Housing is expensive relative to typical incomes"
    }
  },
  HOUSING_DIVERGENCE: {
    id: "HOUSING_DIVERGENCE", 
    title: "Regional Housing Gap",
    subtitle: "How does Alabama compare to national housing costs?",
    description: "Shows whether Alabama housing is more or less affordable than the national average. Positive means Alabama is more affordable.",
    formula: "Alabama Affordability - National Affordability",
    components: ["HOUSING_AFFORDABILITY"],
    units: "Percentage Point Difference",
    category: "Housing Market",
    interpretation: {
      positive: "Alabama housing is more affordable than national average",
      negative: "Alabama housing is less affordable than national average",
      neutral: "Alabama housing affordability matches national average"
    }
  },
  ECONOMIC_GROWTH_INDEX: {
    id: "ECONOMIC_GROWTH_INDEX",
    title: "Economic Momentum Index",
    subtitle: "Is the economy expanding or contracting?",
    description: "Combines GDP growth with employment trends to show overall economic momentum and direction.",
    formula: "GDP Growth Rate + Employment Change Rate",
    components: ["GDPC1", "UNRATE"],
    units: "Growth Index Points",
    category: "Growth Analysis",
    interpretation: {
      positive: "Economy is expanding - more jobs and higher output",
      negative: "Economic contraction - declining output and employment",
      neutral: "Economic stability - little change in growth or employment"
    }
  }
};
return {INSIGHT_CATEGORIES,ECONOMIC_INSIGHTS};
}});

define({id: "1d919f7a", inputs: ["filterDataByDateRange"], outputs: ["calculateMiseryIndex","calculateHousingAffordability","calculateRealInterestRate","calculateEWMA"], body: (filterDataByDateRange) => {
// Calculate composite indicators
function calculateMiseryIndex(unemploymentData, inflationData, dateRange) {
  unemploymentData = filterDataByDateRange(unemploymentData, dateRange.startDate, dateRange.endDate);
  inflationData = filterDataByDateRange(inflationData, dateRange.startDate, dateRange.endDate);

  const commonDates = unemploymentData
    .map((d) => d.Date)
    .filter((date) => inflationData.some((d) => d.Date.getTime() === date.getTime()));

  return commonDates.map((date) => {
    const unemployment = unemploymentData.find((d) => d.Date.getTime() === date.getTime())?.Value || 0;
    const inflation = inflationData.find((d) => d.Date.getTime() === date.getTime())?.Value || 0;

    return {
      Date: date,
      Value: unemployment + inflation,
      Unemployment: unemployment,
      Inflation: inflation
    };
  });
}

function calculateHousingAffordability(incomeData, priceData, dateRange) {
  incomeData = filterDataByDateRange(incomeData, dateRange.startDate, dateRange.endDate);
  priceData = filterDataByDateRange(priceData, dateRange.startDate, dateRange.endDate);

  const commonDates = incomeData
    .map((d) => d.Date)
    .filter((date) => priceData.some((d) => d.Date.getTime() === date.getTime()));

  return commonDates.map((date) => {
    const income = incomeData.find((d) => d.Date.getTime() === date.getTime())?.Value || 0;
    const price = priceData.find((d) => d.Date.getTime() === date.getTime())?.Value || 0;
    const affordability = price > 0 ? (income / price) * 100 : 0;

    return {
      Date: date,
      Value: affordability,
      Income: income,
      Price: price
    };
  });
}

function calculateRealInterestRate(interestData, inflationData, dateRange) {
  interestData = filterDataByDateRange(interestData, dateRange.startDate, dateRange.endDate);
  inflationData = filterDataByDateRange(inflationData, dateRange.startDate, dateRange.endDate);

  const commonDates = interestData
    .map((d) => d.Date)
    .filter((date) => inflationData.some((d) => d.Date.getTime() === date.getTime()));

  return commonDates.map((date) => {
    const interest = interestData.find((d) => d.Date.getTime() === date.getTime())?.Value || 0;
    const inflation = inflationData.find((d) => d.Date.getTime() === date.getTime())?.Value || 0;

    return {
      Date: date,
      Value: interest - inflation,
      Interest: interest,
      Inflation: inflation
    };
  });
}

function calculateEWMA(data, smoothingFactor = 0.3) {
  if (!data || data.length === 0) return [];
  
  const sortedData = [...data].sort((a, b) => a.Date.getTime() - b.Date.getTime());
  const result = [{ Date: sortedData[0].Date, Value: sortedData[0].Value }];

  for (let i = 1; i < sortedData.length; i++) {
    const currentValue = sortedData[i].Value;
    const previousEWMA = result[i - 1].Value;
    const ewma = smoothingFactor * currentValue + (1 - smoothingFactor) * previousEWMA;

    result.push({
      Date: sortedData[i].Date,
      Value: ewma
    });
  }

  return result;
}
return {calculateMiseryIndex,calculateHousingAffordability,calculateRealInterestRate,calculateEWMA};
}});

define({id: "d055ceef", inputs: ["ECONOMIC_INSIGHTS","INDICATORS_FLAT","calculateMiseryIndex","calculateRealInterestRate","calculateHousingAffordability","html"], outputs: ["getInsightSummaryStats","renderInsightSummaryCard"], body: (ECONOMIC_INSIGHTS,INDICATORS_FLAT,calculateMiseryIndex,calculateRealInterestRate,calculateHousingAffordability,html) => {
// Get summary statistics for insights
function getInsightSummaryStats(insightId, dateRange) {
  let data = [];
  let latestValue = null;
  let trend = "stable";
  let interpretation = "";
  
  const insight = ECONOMIC_INSIGHTS[insightId];
  
  if (insightId === "MISERY_INDEX") {
    const unemploymentData = INDICATORS_FLAT.filter((item) => item.Indicator === "UNRATE");
    const inflationData = INDICATORS_FLAT.filter((item) => item.Indicator === "CPIAUCSL");
    data = calculateMiseryIndex(unemploymentData, inflationData, dateRange);
  } else if (insightId === "REAL_INTEREST_RATE") {
    const interestData = INDICATORS_FLAT.filter((item) => item.Indicator === "FEDFUNDS");
    const inflationData = INDICATORS_FLAT.filter((item) => item.Indicator === "CPIAUCSL");
    data = calculateRealInterestRate(interestData, inflationData, dateRange);
  } else if (insightId === "HOUSING_AFFORDABILITY") {
    const nationalIncomeData = INDICATORS_FLAT.filter((item) => item.Indicator === "MEHOINUSA672N");
    const nationalPriceData = INDICATORS_FLAT.filter((item) => item.Indicator === "MSPUS");
    data = calculateHousingAffordability(nationalIncomeData, nationalPriceData, dateRange);
  }
  
  if (data.length > 0) {
    const latest = data[data.length - 1];
    const previous = data.length > 1 ? data[data.length - 2] : null;
    latestValue = latest.Value;
    
    if (previous) {
      const change = latest.Value - previous.Value;
      trend = Math.abs(change) < 0.1 ? "stable" : (change > 0 ? "increasing" : "decreasing");
    }
    
    // Generate interpretation based on insight type and value
    if (insightId === "MISERY_INDEX") {
      if (latestValue < 8) interpretation = insight.interpretation.low;
      else if (latestValue < 15) interpretation = insight.interpretation.medium;
      else interpretation = insight.interpretation.high;
    } else if (insightId === "REAL_INTEREST_RATE") {
      if (latestValue > 1) interpretation = insight.interpretation.positive;
      else if (latestValue < -1) interpretation = insight.interpretation.negative;
      else interpretation = insight.interpretation.neutral;
    } else if (insightId === "HOUSING_AFFORDABILITY") {
      if (latestValue > 25) interpretation = insight.interpretation.high;
      else if (latestValue > 20) interpretation = insight.interpretation.medium;
      else interpretation = insight.interpretation.low;
    }
  }
  
  return {
    id: insightId,
    title: insight.title,
    subtitle: insight.subtitle,
    latest: latestValue,
    units: insight.units,
    trend: trend,
    interpretation: interpretation,
    date: data.length > 0 ? data[data.length - 1].Date : null
  };
}

function renderInsightSummaryCard(stat) {
  const trendIcon = stat.trend === "increasing" ? "üìà" : stat.trend === "decreasing" ? "üìâ" : "‚û°Ô∏è";
  const trendColor = stat.trend === "increasing" ? "#e74c3c" : stat.trend === "decreasing" ? "#27ae60" : "#95a5a6";
  
  // Special handling for some indicators where decreasing is better
  const isGoodTrend = (stat.id === "MISERY_INDEX" && stat.trend === "decreasing") ||
                     (stat.id === "REAL_INTEREST_RATE" && stat.trend === "increasing") ||
                     (stat.id === "HOUSING_AFFORDABILITY" && stat.trend === "increasing");
  
  const finalTrendColor = isGoodTrend ? "#27ae60" : 
                         (stat.trend === "stable" ? "#95a5a6" : "#e74c3c");
  
  return html`
    <div class="insight-summary-card">
      <div class="insight-header">
        <div class="insight-title">
          <h4>${stat.title}</h4>
          <p class="insight-subtitle">${stat.subtitle}</p>
        </div>
        <span class="insight-trend-icon">${trendIcon}</span>
      </div>
      <div class="insight-value">
        ${typeof stat.latest === 'number' ? stat.latest.toFixed(1) : 'N/A'}
        <span class="insight-units">${stat.units}</span>
      </div>
      <div class="insight-trend" style="color: ${finalTrendColor}">
        ${stat.trend} trend
      </div>
      <div class="insight-interpretation">
        ${stat.interpretation}
      </div>
      ${stat.date ? html`<div class="insight-date">
        ${stat.date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}
      </div>` : ''}
    </div>
  `;
}
return {getInsightSummaryStats,renderInsightSummaryCard};
}});

define({id: "76233edc", inputs: ["ECONOMIC_INSIGHTS","getChartDimensions","INSIGHT_CATEGORIES","INDICATORS_FLAT","calculateMiseryIndex","calculateEWMA","Plot","calculateRealInterestRate","calculateHousingAffordability","html","getGridClass","getInsightSummaryStats","renderInsightSummaryCard"], outputs: ["renderInsightChart","renderInsightSection"], body: (ECONOMIC_INSIGHTS,getChartDimensions,INSIGHT_CATEGORIES,INDICATORS_FLAT,calculateMiseryIndex,calculateEWMA,Plot,calculateRealInterestRate,calculateHousingAffordability,html,getGridClass,getInsightSummaryStats,renderInsightSummaryCard) => {
// Enhanced chart rendering with better styling
function renderInsightChart(insightId, dateRange, gridColumns) {
  const insight = ECONOMIC_INSIGHTS[insightId];
  const dimensions = getChartDimensions(gridColumns, window.innerWidth < 768);
  const categoryData = INSIGHT_CATEGORIES[insight.category];
  
  if (insightId === "MISERY_INDEX") {
    const unemploymentData = INDICATORS_FLAT.filter((item) => item.Indicator === "UNRATE");
    const inflationData = INDICATORS_FLAT.filter((item) => item.Indicator === "CPIAUCSL");
    const miseryData = calculateMiseryIndex(unemploymentData, inflationData, dateRange);
    const smoothedData = calculateEWMA(miseryData, 0.4);

    return Plot.plot({
      title: insight.title,
      subtitle: "Higher values indicate greater economic hardship",
      x: { grid: true, label: "Date" },
      y: { grid: true, label: insight.units },
      width: dimensions.width,
      height: dimensions.height,
      margin: 40,
      marks: [
        Plot.lineY(miseryData, {
          x: "Date",
          y: "Value", 
          stroke: categoryData.color,
          strokeWidth: 1.5,
          strokeOpacity: 0.7
        }),
        Plot.lineY(smoothedData, {
          x: "Date",
          y: "Value",
          stroke: categoryData.color,
          strokeWidth: 3
        }),
        Plot.dot(miseryData.filter((d, i) => i % 3 === 0), {
          x: "Date",
          y: "Value",
          fill: categoryData.color,
          r: 3,
          tip: true
        })
      ]
    });
  } else if (insightId === "REAL_INTEREST_RATE") {
    const interestData = INDICATORS_FLAT.filter((item) => item.Indicator === "FEDFUNDS");
    const inflationData = INDICATORS_FLAT.filter((item) => item.Indicator === "CPIAUCSL");
    const realRateData = calculateRealInterestRate(interestData, inflationData, dateRange);
    const smoothedData = calculateEWMA(realRateData, 0.3);

    return Plot.plot({
      title: insight.title,
      subtitle: "Positive values benefit savers, negative values favor borrowers",
      x: { grid: true, label: "Date" },
      y: { grid: true, label: insight.units },
      width: dimensions.width,
      height: dimensions.height,
      margin: 40,
      marks: [
        Plot.ruleY([0], { stroke: "#666", strokeDasharray: "3,3" }),
        Plot.areaY(realRateData, {
          x: "Date",
          y: "Value",
          fill: (d) => d.Value >= 0 ? "rgba(39, 174, 96, 0.2)" : "rgba(231, 76, 60, 0.2)"
        }),
        Plot.lineY(realRateData, {
          x: "Date",
          y: "Value",
          stroke: categoryData.color,
          strokeWidth: 1.5,
          strokeOpacity: 0.7
        }),
        Plot.lineY(smoothedData, {
          x: "Date",
          y: "Value",
          stroke: categoryData.color,
          strokeWidth: 3
        })
      ]
    });
  } else if (insightId === "HOUSING_AFFORDABILITY") {
    const nationalIncomeData = INDICATORS_FLAT.filter((item) => item.Indicator === "MEHOINUSA672N");
    const nationalPriceData = INDICATORS_FLAT.filter((item) => item.Indicator === "MSPUS");
    const alabamaIncomeData = INDICATORS_FLAT.filter((item) => item.Indicator === "MEHOINUSALA646N");
    const alabamaPriceData = INDICATORS_FLAT.filter((item) => item.Indicator === "MEDLISPRIAL");
    
    const nationalData = calculateHousingAffordability(nationalIncomeData, nationalPriceData, dateRange);
    const alabamaData = calculateHousingAffordability(alabamaIncomeData, alabamaPriceData, dateRange);

    return Plot.plot({
      title: insight.title,
      subtitle: "Higher values indicate more affordable housing relative to income",
      x: { grid: true, label: "Date" },
      y: { grid: true, label: insight.units },
      width: dimensions.width,
      height: dimensions.height,
      margin: 40,
      marks: [
        Plot.lineY(nationalData, {
          x: "Date",
          y: "Value",
          stroke: "#3498db",
          strokeWidth: 2.5,
          tip: true
        }),
        Plot.lineY(alabamaData, {
          x: "Date",
          y: "Value",
          stroke: "#e74c3c",
          strokeWidth: 2.5,
          tip: true
        }),
        Plot.text([{x: nationalData[0]?.Date, y: 32, text: "National", fill: "#3498db"}], {
          x: "x", y: "y", text: "text", fill: "fill", dx: 20
        }),
        Plot.text([{x: alabamaData[0]?.Date, y: 30, text: "Alabama", fill: "#e74c3c"}], {
          x: "x", y: "y", text: "text", fill: "fill", dx: 20
        })
      ]
    });
  }
  
  return html`<div>Chart for ${insightId} not implemented yet</div>`;
}

function renderInsightSection(categoryName, categoryData, dateRange, gridSettings) {
  const gridClass = getGridClass(gridSettings.columns);
  const summaryStats = categoryData.insights.map(insightId => getInsightSummaryStats(insightId, dateRange));
  
  return html`
    <div class="insight-section">
      <div class="insight-section-header">
        <h2>${categoryData.icon} ${categoryName}</h2>
        <p class="section-description">${categoryData.description}</p>
        <div class="insight-summary-stats">
          ${summaryStats.map(stat => renderInsightSummaryCard(stat))}
        </div>
      </div>
      <div class="insight-section-charts">
        <div class="grid ${gridClass}">
          ${categoryData.insights.map(
            (insightId) => html`
              <div class="insight-chart-container">
                ${renderInsightChart(insightId, dateRange, gridSettings.columns)}
              </div>
            `
          )}
        </div>
      </div>
    </div>
  `;
}
return {renderInsightChart,renderInsightSection};
}});

define({id: "1a53dfee", inputs: ["html","INSIGHT_CATEGORIES","renderInsightSection","createDateFilter","INDICATORS_FLAT","createGridControls"], outputs: ["currentDateRange","currentGridSettings","insightsDashboardContainer","updateInsightsDashboard","insightsDateFilterControl","insightsGridControlsElement"], body: (html,INSIGHT_CATEGORIES,renderInsightSection,createDateFilter,INDICATORS_FLAT,createGridControls) => {
// State management for insights dashboard
let currentDateRange = {
  startDate: new Date(new Date().getFullYear() - 5, 0, 1),
  endDate: new Date()
};
let currentGridSettings = { columns: 1, grouped: true };

// Create dashboard content container
const insightsDashboardContainer = html`<div class="insights-dashboard-container"></div>`;

// Function to update insights dashboard
function updateInsightsDashboard() {
  const content = html`<div class="insights-dashboard-sections">
    ${Object.entries(INSIGHT_CATEGORIES).map(([categoryName, categoryData]) => 
      renderInsightSection(categoryName, categoryData, currentDateRange, currentGridSettings)
    )}
  </div>`;

  insightsDashboardContainer.innerHTML = "";
  insightsDashboardContainer.appendChild(content);
}

// Create controls
const insightsDateFilterControl = createDateFilter(
  INDICATORS_FLAT,
  currentDateRange.startDate,
  currentDateRange.endDate,
  (newDateRange) => {
    currentDateRange = newDateRange;
    updateInsightsDashboard();
  }
);

const insightsGridControlsElement = createGridControls(currentGridSettings.columns, false, (newGridSettings) => {
  currentGridSettings = newGridSettings;
  updateInsightsDashboard();
});

// Initial dashboard content
updateInsightsDashboard();
return {currentDateRange,currentGridSettings,insightsDashboardContainer,updateInsightsDashboard,insightsDateFilterControl,insightsGridControlsElement};
}});

define({id: "f8d0d73d", mode: "inline", inputs: ["ECONOMIC_INSIGHTS","display"], body: async (ECONOMIC_INSIGHTS,display) => {
display(await(
Object.keys(ECONOMIC_INSIGHTS).length
))
}});

define({id: "3d21f974", mode: "inline", inputs: ["INSIGHT_CATEGORIES","display"], body: async (INSIGHT_CATEGORIES,display) => {
display(await(
Object.keys(INSIGHT_CATEGORIES).length
))
}});

define({id: "68fc7a38", mode: "inline", inputs: ["INDICATORS_FLAT","insightsDateFilterControl","html","display"], body: async (INDICATORS_FLAT,insightsDateFilterControl,html,display) => {
display(await(
INDICATORS_FLAT.length > 0 ? insightsDateFilterControl : html`<div>Loading date filter...</div>`
))
}});

define({id: "7c73b574", mode: "inline", inputs: ["insightsGridControlsElement","display"], body: async (insightsGridControlsElement,display) => {
display(await(
insightsGridControlsElement
))
}});

define({id: "d55c95c6", mode: "inline", inputs: ["INDICATORS_FLAT","insightsDashboardContainer","html","display"], body: async (INDICATORS_FLAT,insightsDashboardContainer,html,display) => {
display(await(
INDICATORS_FLAT.length > 0 ? insightsDashboardContainer : html`<div>Loading insights...</div>`
))
}});

</script>
</head>
<body>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link"><a href="./">Economic Data Dashboard</a></li>
  </ol>
  <div id="observablehq-search"><input type="search" placeholder="Search"></div>
  <div id="observablehq-search-results"></div>
  <script>{const o=document.querySelector("#observablehq-search");o.setAttribute("data-shortcut",`${/Mac|iPhone/.test(navigator.platform)?"\u2318":"Alt-"}K`);const t=o.querySelector("input"),r=()=>import("./_observablehq/search.732a8e51.js");t.addEventListener("focus",r,{once:!0}),t.addEventListener("keydown",r,{once:!0});const c=document.querySelector("#observablehq-sidebar-toggle");addEventListener("keydown",e=>{(e.code==="KeyK"&&e.metaKey&&!e.altKey&&!e.ctrlKey||e.key==="/"&&!e.metaKey&&!e.altKey&&!e.ctrlKey&&e.target===document.body)&&(c.checked?t.focus():(c.click(),t.focus(),c.click()),t.select(),e.preventDefault())});}</script>
  <ol>
    <li class="observablehq-link"><a href="./">Home</a></li>
    <li class="observablehq-link"><a href="./alabama-dashboard">Alabama Dashboard</a></li>
    <li class="observablehq-link observablehq-link-active"><a href="./living-indicators">Economic Insights</a></li>
  </ol>
</nav>
<script>{const e=document.querySelector("#observablehq-sidebar"),o=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?o.checked=r==="true":o.indeterminate=!0;for(const t of document.querySelectorAll("#observablehq-sidebar summary")){const s=t.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${t.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<div id="observablehq-center">
<aside id="observablehq-toc" data-selector="h1:not(:first-of-type)[id], h2:first-child[id], :not(h1) + h2[id]">
<nav>
<div>Contents</div>
<ol>
<li class="observablehq-secondary-link"><a href="#dashboard-controls">Dashboard Controls</a></li>
<li class="observablehq-secondary-link"><a href="#economic-analysis">Economic Analysis</a></li>
</ol>
</nav>
</aside>
<main id="observablehq-main" class="observablehq">
<div class="observablehq observablehq--block"><!--:6447da08:--></div>
<div class="observablehq observablehq--block"><!--:ea48656a:--></div>
<div class="observablehq observablehq--block"><!--:ee209c23:--></div>
<div class="observablehq observablehq--block"><!--:1d919f7a:--></div>
<div class="observablehq observablehq--block"><!--:d055ceef:--></div>
<div class="observablehq observablehq--block"><!--:76233edc:--></div>
<div class="observablehq observablehq--block"><!--:1a53dfee:--></div>
<h1 id="economic-insights" tabindex="-1"><a class="observablehq-header-anchor" href="#economic-insights">Economic Insights</a></h1>
<p>Explore advanced economic analysis through composite indicators that combine multiple data sources to reveal deeper insights about economic conditions, housing markets, and financial trends.</p>
<div class="insights-intro">
  <div class="intro-content">
    <h1>üìä Economic Insights Dashboard</h1>
    <p>Understanding complex economic relationships through advanced indicators that combine multiple data sources. These insights help reveal the bigger picture of economic conditions affecting everyday Americans.</p>
  </div>
  <div class="insights-overview">
    <div class="overview-stat">
      <span class="stat-number"><observablehq-loading></observablehq-loading><!--:f8d0d73d:--></span>
      <span class="stat-label">Composite Indicators</span>
    </div>
    <div class="overview-stat">
      <span class="stat-number"><observablehq-loading></observablehq-loading><!--:3d21f974:--></span>
      <span class="stat-label">Analysis Categories</span>
    </div>
  </div>
</div>
<h2 id="dashboard-controls" tabindex="-1"><a class="observablehq-header-anchor" href="#dashboard-controls">Dashboard Controls</a></h2>
<div class="dashboard-controls">
  <div class="controls-row">
    <observablehq-loading></observablehq-loading><!--:68fc7a38:-->
    <observablehq-loading></observablehq-loading><!--:7c73b574:-->
  </div>
</div>
<h2 id="economic-analysis" tabindex="-1"><a class="observablehq-header-anchor" href="#economic-analysis">Economic Analysis</a></h2>
<div class="insights-dashboard-content">
  <observablehq-loading></observablehq-loading><!--:d55c95c6:-->
</div>
<style>
/* Insights-specific styling */
.insights-intro {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 3rem 2rem;
  border-radius: 16px;
  margin-bottom: 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 2rem;
}

.intro-content h1 {
  margin: 0 0 1rem 0;
  font-size: 2.5rem;
  font-weight: 700;
  line-height: 1.2;
}

.intro-content p {
  margin: 0;
  font-size: 1.1rem;
  opacity: 0.9;
  line-height: 1.5;
  max-width: 600px;
}

.insights-overview {
  display: flex;
  gap: 2rem;
  flex-wrap: wrap;
}

.overview-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  padding: 1.5rem;
  min-width: 120px;
}

.stat-number {
  font-size: 2.5rem;
  font-weight: 700;
  line-height: 1;
}

.stat-label {
  font-size: 0.9rem;
  opacity: 0.8;
  margin-top: 0.5rem;
}

/* Insight Sections */
.insights-dashboard-sections {
  display: flex;
  flex-direction: column;
  gap: 4rem;
}

.insight-section {
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.insight-section-header {
  background: var(--theme-background-secondary);
  padding: 2rem;
  border-bottom: 1px solid var(--theme-foreground-faint);
}

.insight-section-header h2 {
  margin: 0 0 1rem 0;
  color: var(--theme-foreground-focus);
  font-size: 1.8rem;
  font-weight: 600;
}

.section-description {
  margin: 0 0 2rem 0;
  color: var(--theme-foreground-muted);
  font-size: 1.1rem;
  line-height: 1.5;
}

.insight-summary-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.insight-summary-card {
  background: var(--theme-background-primary);
  border-radius: 12px;
  padding: 1.5rem;
  border: 1px solid var(--theme-foreground-faint);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.insight-summary-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.insight-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1rem;
}

.insight-title h4 {
  margin: 0 0 0.25rem 0;
  font-size: 1rem;
  color: var(--theme-foreground-focus);
  font-weight: 600;
}

.insight-subtitle {
  margin: 0;
  font-size: 0.85rem;
  color: var(--theme-foreground-muted);
  line-height: 1.3;
}

.insight-trend-icon {
  font-size: 1.4rem;
}

.insight-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--theme-foreground-focus);
  margin-bottom: 0.5rem;
  line-height: 1;
}

.insight-units {
  font-size: 0.7rem;
  font-weight: 400;
  color: var(--theme-foreground-muted);
  margin-left: 0.25rem;
}

.insight-trend {
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
  text-transform: capitalize;
}

.insight-interpretation {
  font-size: 0.9rem;
  color: var(--theme-foreground-muted);
  line-height: 1.4;
  margin-bottom: 0.5rem;
}

.insight-date {
  font-size: 0.8rem;
  color: var(--theme-foreground-faint);
}

.insight-section-charts {
  background: var(--theme-background-primary);
  padding: 2rem;
}

.insight-chart-container {
  margin: 1rem 0;
  padding: 1rem;
  background: var(--theme-background-secondary);
  border-radius: 8px;
  overflow: hidden;
}

/* Dashboard Controls */
.dashboard-controls {
  background: var(--theme-background-secondary);
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.controls-row {
  display: flex;
  gap: 2rem;
  align-items: flex-start;
  flex-wrap: wrap;
}

/* Date Filter Styles */
.date-filter {
  flex: 1;
  min-width: 300px;
}

.date-filter-header h4 {
  margin: 0 0 1rem 0;
  color: var(--theme-foreground-focus);
  font-size: 1rem;
  font-weight: 600;
}

.date-filter-controls {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.date-inputs {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.date-input-group {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.date-input-group label {
  font-size: 0.875rem;
  color: var(--theme-foreground-muted);
  font-weight: 500;
}

.date-input-group input {
  padding: 0.5rem;
  border: 1px solid var(--theme-foreground-faint);
  border-radius: 6px;
  background: var(--theme-background-primary);
  color: var(--theme-foreground);
  font-size: 0.875rem;
}

.date-presets {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.preset-btn {
  padding: 0.5rem 1rem;
  border: 1px solid var(--theme-foreground-faint);
  border-radius: 6px;
  background: var(--theme-background-primary);
  color: var(--theme-foreground);
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.preset-btn:hover {
  background: var(--theme-background-secondary);
  border-color: var(--theme-primary);
}

.preset-btn.active {
  background: var(--theme-primary);
  color: white;
  border-color: var(--theme-primary);
}

/* Grid Controls Styles */
.grid-controls {
  flex: 1;
  min-width: 250px;
}

.grid-controls-header h4 {
  margin: 0 0 1rem 0;
  color: var(--theme-foreground-focus);
  font-size: 1rem;
  font-weight: 600;
}

.grid-controls-buttons {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.grid-btn {
  padding: 0.5rem 1rem;
  border: 1px solid var(--theme-foreground-faint);
  border-radius: 6px;
  background: var(--theme-background-primary);
  color: var(--theme-foreground);
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
  font-weight: 500;
}

.grid-btn:hover {
  background: var(--theme-background-secondary);
  border-color: var(--theme-primary);
}

.grid-btn.active {
  background: var(--theme-primary);
  color: white;
  border-color: var(--theme-primary);
}

/* Grid System */
.grid {
  display: grid;
  gap: 1.5rem;
  margin: 2rem 0;
}

.grid-cols-1 {
  grid-template-columns: 1fr;
}

.grid-cols-2 {
  grid-template-columns: repeat(2, 1fr);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .insights-intro {
    flex-direction: column;
    text-align: center;
    padding: 2rem 1.5rem;
  }
  
  .intro-content h1 {
    font-size: 2rem;
  }
  
  .insights-overview {
    justify-content: center;
  }
  
  .insight-summary-stats {
    grid-template-columns: 1fr;
  }
  
  .insight-section-header {
    padding: 1.5rem;
  }
  
  .insight-section-charts {
    padding: 1.5rem;
  }
  
  .controls-row {
    flex-direction: column;
    gap: 1.5rem;
  }
  
  .date-inputs {
    flex-direction: column;
  }
}

@media (max-width: 1024px) {
  .insight-summary-stats {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }
}
</style></main>
<footer id="observablehq-footer">
<nav><a rel="prev" href="./alabama-dashboard"><span>Alabama Dashboard</span></a></nav>
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2025-06-25T10:56:01">Jun 25, 2025</a>.</div>
</footer>
</div>
</body>
</html>
